<!DOCTYPE html>
<html>
<head>
    <title>Channel Visualization</title>
    <!-- Include Plotly.js from the Plotly CDN -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

</head>
<body>
    <h1>Reconstructed Signals for Selected Channels</h1>

    <!-- Loop through the selected channels and display reconstructed signals -->
    <ul>
        {% for channel in selected_channels %}
            <li>{{ channel }}</li>
            <!-- Display the reconstructed signal for the current channel -->
            <div id="channel-{{ forloop.counter }}"></div>
        {% endfor %}
    </ul>

    <!-- Include Plotly.js from the Plotly CDN -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <script>
    {% for channel, data in reconstructed_data.items %}
    // Extract the data for the channel
    var channelData{{ forloop.counter }} = {{ data|safe }};

    // Define the Plotly trace
    var trace{{ forloop.counter }} = {
        x: Array.from({ length: channelData{{ forloop.counter }}.length }, (_, i) => i), // Create x-axis values
        y: channelData{{ forloop.counter }}, // Use the reconstructed data
        mode: 'lines',  // Set the mode to 'lines' for line plot
        name: '{{ channel }}',
    };

    // Define the layout for the plot
    var layout{{ forloop.counter }} = {
        title: '{{ channel }} Signal',
        xaxis: { title: 'Time' },
        yaxis: { title: 'Amplitude' },
    };

    // Create a Plotly plot for the channel
    Plotly.newPlot('channel-{{ forloop.counter }}', [trace{{ forloop.counter }}], layout{{ forloop.counter }});
    {% endfor %}
    </script>
</body>
</html>
